{% extends 'layout.html' %}
{% block head %}
    <style>
        #lang-box {
            visibility: hidden;
        }

        .container-fluid {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100vh;

        }

        #sliding-door {
            z-index: 1;
            position: absolute;
            width: 50%;
            flex-wrap: nowrap;
        }

        #main-content {
            padding-top: 150px;
            position: relative;
            text-align: center;
            width: 100%;
        }


        .door {
            height: 80vh;
            transition: all 0.5s ease-IN;
            transform: translateX(0);
        }

        .left-door {
            background-color: grey;
            /*transform: translateX(-100%);*/
            border-right: solid 3px black;
            font-size: 8vw;
        }

        #door-text-function-window {
            margin-top: 15vh;
            border: solid 1px black;
        }

        .door-text-function-border {
            font-size: 1.5vw;
            text-align: center;
            padding: 5px;
            border-bottom: solid 1px black;
            color: black;
        }

        .right-door {
            background-color: grey;
            /*transform: translateX(100%);*/
            border-left: solid 3px black;
        }


        input[type=checkbox]:checked ~ div.left-door {
            transform: translateX(0);
        }

        input[type=checkbox]:checked ~ div.right-door {
            transform: translateX(0);
        }


        .lock-wrapper {
            margin-top: 15vh;
            min-width: 80px;
            min-height: 20%;
            width: 150px;
            padding: 0;
            box-shadow: 2px 2px 2px #2d6898, 3px 3px 3px #2d6898, 4px 4px 4px #2d6898;
        }

        .lock-screen {
            background-color: wheat;
            padding-top: 5px;
            text-align: center;
            min-height: 30px;
            width: 100%;
            border-radius: 5%;
            border: solid 2px #538fbe;
            word-wrap: break-word;
        }

        .lock-keypad {
            min-width: 100%;
            margin: 0;
        }

        .lock-keypad-row {
            width: 100%;
            height: 25%;
            margin-left: 0;
        }

        .lock-keypad-button {
            min-width: 5px;
            width: 33.3%;
            text-align: center;
            height: 100%;
            padding: 5px 0 0;
            cursor: pointer;
            display: inline-block;
            text-decoration: none;
            color: #fff;
            font-weight: bold;
            background-color: #538fbe;
            border: 1px solid #2d6898;
            box-shadow: 2px 2px 2px #2d6898, 3px 3px 3px #2d6898, 4px 4px 4px #2d6898;
            border-radius: 2%;
        }

        .lock-keypad-button:hover {
            background-color: darkgray;
            box-shadow: 7px 7px 7px #2d6898;
        }

        .lock-keypad-LED {
            height: 15px;
            width: 15px;
            background-color: red;
            border-radius: 50%;
            display: inline-block;

        }
    </style>
{% endblock %}


{% block content %}
    <div class="container-fluid">

        <div class="row" id="sliding-door">
            <!--sliding door start -->
            <!--left door start-->
            <div class="door col-xs-6 left-door">
                <div class="left-door-text">
                    <div id="door-text-function-window">
                        <div class="door-text-function-border">
                            Cleanroom Locked
                        </div>
                    </div>
                </div>

            </div>
            <!--right door end-->
            <!--right door start-->
            <div class="door col-xs-6 right-door">

                <!-- lock wrapper   start -->
                <div class="lock-wrapper">
                    <!--lock screen start-->
                    <div class="lock-screen" id="demo">
                    </div>
                    <!-- lock screen end-->
                    <!--lock keypad start-->
                    <div class="lock-keypad">
                        <!--lock keypad row 1-->
                        <div class="row lock-keypad-row">
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('1')">1</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('2')">2</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('3')">3</div>
                        </div>
                        <!--lock keypad row 2-->
                        <div class="row lock-keypad-row">
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('4')">4</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('5')">5</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('6')">6</div>
                        </div>
                        <!--lock keypad row 3-->
                        <div class="row lock-keypad-row">
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('7')">7</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('8')">8</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('9')">9</div>
                        </div>
                        <!--lock keypad row 4-->
                        <div class="row lock-keypad-row">
                            <div class="col-xs-4 lock-keypad-button" onclick="deleteLastElement()">DEL</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="buttonClicked('0')">0</div>
                            <div class="col-xs-4 lock-keypad-button" onclick="submitClicked()">
                                <span class="lock-keypad-LED"></span>
                            </div>
                        </div>
                    </div>
                    <!--lock keypad end-->
                </div>
                <!-- lock wrapper end -->
            </div>
            <!--right door end-->
        </div>
        <!--sliding door end-->
        <div class="row" id="main-content">
            <div class="col-xs-12"><h1> Access granted <br/> Cleanroom is unlocked </h1>
            </div>
        </div>
    </div>

{% endblock %}

{% block add_js %}
    <script type="text/javascript">

        //function to add new digit to lock screen
        function buttonClicked(number) {
            document.getElementById("demo").innerHTML += number;
        }

        //function to remove last digit
        function deleteLastElement() {
            let text = document.getElementById("demo");
            if (text.length !== 0) {
                let string = text.innerHTML;
                text.innerHTML = string.substring(0, text.innerHTML.length - 1);
            }
        }

        //function to check the password
        function submitClicked() {
            let lockScreen = document.getElementById("demo");
            let passGuess = lockScreen.innerText;
            let passcode = "{{ g_config.passcode }}"
            if (passGuess === passcode) {
                turnGreen()
            } else {
                lockScreen.innerHTML = "<span style='color: red'>wrong</span>";
                setTimeout(function () {
                    lockScreen.innerHTML = "";
                }, 1000);
            }

        }

        //function to change LED color
        function turnGreen() {
            let lockScreen = document.getElementById("demo");
            lockScreen.innerHTML = "<span style='color: green'>correct</span>";
            document.getElementsByClassName('lock-keypad-LED')[0].style.backgroundColor = "green";
            document.getElementsByClassName('door')[0].style.transitionDelay = "0.6s";
            document.getElementsByClassName('door')[1].style.transitionDelay = "0.6s";
            document.getElementsByClassName('left-door')[0].style.transform = "translateX(-100%)";
            document.getElementsByClassName('right-door')[0].style.transform = "translateX(100%)";
            setTimeout(function () {
                document.getElementsByClassName("lock-wrapper")[0].style.visibility = "hidden";
            }, 2000)
        }
    </script>
{% endblock %}